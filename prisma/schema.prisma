generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Author {
  id          Int      @id @default(autoincrement())
  name        String
  nationality String
  born_date   DateTime
  biography   String
  stock_books Int

  books Book[] // representa todos los libros que pertenecen a un autor

  // @@map("autor") // Mapea Author con la tabla "autor" --- USAR EN CASO DE SER NECESARIO
}

model Book {
  id               Int      @id @default(autoincrement())
  author           Author   @relation(fields: [author_id], references: [id])
  author_id        Int
  availability     String // Con stock  o sin stock disponible(Disponible o no disponible) --- esto se podria actualizar con un if-statement
  stock            Int      @default(0) // Idealmente se carga esto por frontend-backend pero si no se especifica se pone 0 
  title            String
  publication_date DateTime
  genre            String
  language         String
  loan_price       Decimal

  loans Loans[] // relacion de un libro que puede ser prestado varias veces segun el stock

  // @@map("libro") // Mapea el Book con la tabla "libro"  --- USAR EN CASO DE SER NECESARIO
}

model Loans {
  id          Int      @id @default(autoincrement())
  book        Book     @relation(fields: [book_id], references: [id])
  book_id     Int
  price       Decimal
  reader      String
  loan_date   DateTime
  return_date DateTime

  // @@map("prestamos") // Mapea el Loan con la tabla "prestamos"  --- USAR EN CASO DE SER NECESARIO
}